# Instructions for Setting up Flux

Install Flux in the clusters.
> This process will perform a checkin on the git repository /clusters/`$AKS_NAME`/flux-system

**Install Flux on the Azure Kubernetes Instance**
```bash
AKS_NAME="azure-k8s"
kubectl config use-context $AKS_NAME

# Validate Flux requirements
flux check --pre

# Export Github Information if necessary
export GITHUB_TOKEN=""
export GITHUB_REPO="edge-validate"
export GITHUB_USER="<your-github-organization>"


# Bootstrap Flux Components
flux bootstrap github --owner=$GITHUB_USER --repository=$GITHUB_REPO --branch=main --path=./clusters/$AKS_NAME

# Validate
flux check
kubectl get Kustomization -A

# Pull Latest
git pull
```

**Install Flux on the ARC Enabled Kubernetes Instance**
```bash
AKS_NAME="kind-kind"
kubectl config use-context $AKS_NAME

# Validate Flux requirements
flux check --pre

# Export Github Information if necessary
export GITHUB_REPO="edge-validate"
export GITHUB_USER="<your-github-organization>"


# Bootstrap Flux Components
GITHUB_TOKEN="" flux bootstrap github --owner=$GITHUB_USER --repository=$GITHUB_REPO --branch=main --path=./clusters/$AKS_NAME

# Validate
flux check
kubectl get Kustomization -A

# Pull Latest
git pull
```